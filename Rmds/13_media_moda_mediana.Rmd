---
title: "MAT02018 - Estatística Descritiva"
subtitle: "Medidas de tendência central"
fontsize: 10pt
author: |
  | Rodrigo Citton P. dos Reis
  | `citton.padilha@ufrgs.br`
institute: |
  | \textsc{Universidade Federal do Rio Grande do Sul}
  | \textsc{Instituto de Matemática e Estatística}
  | \textsc{Departamento de Estatística}
date: |
  | Porto Alegre, 2021
bibliography: estatistica-descritiva.bib
csl: associacao-brasileira-de-normas-tecnicas-ufrgs-initials.csl
link-citations: yes
header-includes:
  - \titlegraphic{\hfill\includegraphics[height=1.5cm]{logos/Logo-40-anos-estatistica.png}}
---

# Introdução

## Introdução {.allowframebreaks}

- As \structure{medidas de tendência central} (ou \structure{de locação} ou também \structure{de posição}) são \structure{valores} calculados com o objetivo de representar os dados de uma forma ainda mais condensada do que usando uma tabela.
- Quando o desejo é representar, por meio de um valor único, determinado conjunto de informações que variam, parece razoável escolher um __valor central__, mesmo que esse valor seja uma abstração.

\framebreak

```{r, cache=TRUE, message=FALSE, echo=FALSE, out.width="25%", purl=FALSE, fig.align='right'}

knitr::include_graphics(here::here('images', 'Revisao-de-Prova.jpg'))

```

- Assim, se um aluno realizou quatro provas objetivas com 20 questões cada uma, e o número de acertos, em cada prova, foi

$$
(14, 19, 16, 17)
$$
o professor poderá querer registrar o desempenho do aluno por um valor "central", a \structure{média aritmética}, por exemplo.
- A média aritmética de tais valores é \structure{$16,5$}.
- Embora seja uma quantidade de acertos que __não pode ocorrer na realidade__, ela está mostrando que o aluno __apresentou em geral um bom desempenho__.

\framebreak

- Há várias medidas de tendência central.
- As mais utilizadas em análise estatística são a \structure{média aritmética}, a \structure{mediana} e a \structure{moda}.
- Nestas notas apresentamos a definição destas medidas, e através de exemplos, como calculá-las e interpretá-las.

# Média aritmética

## Média aritmética {.allowframebreaks}

- A \structure{média aritmética}, ou simplesmente \structure{média}, é a medida de tendência central mais utilizada.
- Isto se deve, em parte, por ser uma medida fácil de calcular, que tem interpretação familiar e propriedades estatísticas que a tornam muito útil nas comparações entre populações.

- Quando calculada para a população, também é chamada de \structure{valor esperado} da variável, ou \structure{esperança matemática}.
- Pode-se também imaginar a média como \structure{centro de gravidade} de uma distribuição.
- Assim, na figura a seguir, os blocos azuis representam os valores observados para uma certa variável\footnote{Pense que estes blocos possuem um peso, de tal forma que a barra amarela se desequilibra conforme os blocos se movem em cima dela.}.

## Média aritmética {.allowframebreaks}

- Note que conforme estes valores estão posicionados (distribuídos), a média \textcolor{red}{(triângulo em vermelho)}, se desloca, de tal forma que este valor mantém o equilíbrio da distribuição \textcolor{yellow}{(representada pela barra amarela)}.

```{r fig-media, fig.align='center', cache=TRUE, echo=FALSE, out.width="50%", purl=FALSE, out.height='50%'}

knitr::include_graphics(here::here('images', 'media_centro_gravidade2.png'))

```

\framebreak

- Se um valor se afasta dos demais valores da distribuição, como ocorre na figura abaixo, a média também se deslocada para manter o equilíbrio da distribuição\footnote{{\bf Para pensar:} neste caso, a média é uma boa representação sumária da distribuição?}.

```{r fig-media2, fig.align='center', cache=TRUE, echo=FALSE, out.width="50%", purl=FALSE, out.height='50%'}

knitr::include_graphics(here::here('images', 'media_centro_gravidade.png'))

```

## Média aritmética {.allowframebreaks}

- Agora vamos definir a média aritmética.
- Seja \structure{$x$} uma variável de interesse e \structure{$x_1, x_2, \ldots, x_n$} observações de \structure{$x$} em um conjunto de dados (amostra ou população) de tamanho \structure{$n$}.
- A média amostral é denotada por \structure{$\overline{x}$}, enquanto que a média populacional é, geralmente, denotada por \structure{$\mu$}\footnote{Na população, o número de elementos é presentado por $N$.}.
- Para dados que __não estão__ agrupados, a média é simplesmente a soma de todos os valores observados da variável dividido pelo número de observações\footnote{A letra grega $\Sigma$ (sigma) é usada como símbolo para indicar uma soma. Assim, $\sum_{i=1}^n{x_i}$ indica o ``somatório de $x$ índice $i$, $i$ variando de $1$ a $n$''. Ou seja, estamos somando os $n$ elementos do conjunto $\{x_i; i = 1,\ldots, n\}$. Cada $x_i$ representa o valor da variável $x$ com respeito ao $i$-ésimo indivíduo. Por exemplo, se ``Harry'' apresentou o valor 19 anos para a variável idade (representada por $x$), e Harry foi o entrevistado de número 48 em um certo inquérito, temos que $x_{48} = 19$.}

$$
\overline{x} = \frac{1}{n}\sum_{i=1}^n{x_i} = \frac{x_1 + x_2 + \ldots + x_n}{n}.
$$

## Média aritmética (exemplo) {.allowframebreaks}

- Suponha que, ao estudar a quantidade de albumina no plasma de pessoas com determinada doença, um pesquisador obtenha, em 25 indivíduos, os seguintes valores (em g/100 ML): 

```{r, echo=FALSE, message=FALSE, warning=FALSE, purl=FALSE}

library(knitr)

kable(x = matrix(data = c(5.1, 4.9, 4.9, 5.1, 4.7, 5.0, 5.0, 5.0, 5.1, 5.4,
                      5.2, 5.2, 4.9, 5.3, 5.0, 4.5, 5.4, 5.1, 4.7, 5.5,
                      4.8, 5.1, 5.3, 5.3, 5.0),
             ncol = 5, byrow = T),
      format = "pandoc",
      escape = FALSE,
      align = "c",
      format.args = list(decimal.mark = ",")
      )
```

\framebreak

- Considere que $x$ representa a variável __quantidade de albumina no plasma__, e portanto, $x_1 = 5,1; x_2 = 4,9; \ldots; x_{25} = 5,0$. A média, conforme a sua definição, é calculada

$$
\overline{x} = \frac{1}{25}\sum_{i=1}^{25}{x_i} = \frac{5,1 + 4,9 + \ldots + 5,0}{25} = \frac{126,5}{25} = 5,06.
$$

\framebreak

- Assim, temos que o valor médio da __quantidade de albumina no plasma__ neste grupo de indivíduos é \structure{$5,06$ g/100 mL}.
- Note que a média é uma característica da distribuição, e não de um ou outro indivíduo/observação em particular.
- As observações estão distribuídas em torno deste valor\footnote{Faça um diagrama de pontos com os valores do exemplo, e avalie se a média é o ponto de equilíbrio esta distribuição}.
- Note que a média \structure{é influenciada pelos valores extremos} da distribuição.
    + Se no lugar de \structure{$x_{20} = 5,5$} __(hipoteticamente)__ observássemos o valor \structure{$6,8$}, então teríamos que média seria \structure{$5,11$}.

## Média aritmética (exercício) {.allowframebreaks}

__Sua vez!__ (largura da pétala de íris): calcule a média para o seguinte conjunto de dados.

```{r, echo=FALSE, message=FALSE, warning=FALSE, purl=FALSE}

set.seed(1309)

petal.width.sample <- sample(iris$Petal.Width, 10, replace = F)

kable(x = matrix(petal.width.sample, ncol = 5, byrow = T),
      format = "pandoc",
      align = "c", format.args = list(decimal.mark = ","))
```

# Cálculo da média para dados em agrupamento simples

## Média para dados em agrupamento simples {.allowframebreaks}

- Para dados que são apresentados em agrupamentos simples\footnote{Imagine que você não possui acesso a planilha de dados brutos, logo você não tem a informação a nível da observação. Mas, digamos que você tenha acesso a uma tabela de frequências (uma forma já resumida/agregada) da variável de interesse.},
- calcula-se a média do seguinte modo:

$$
\overline{x} = \frac{\sum_i{n_ix_i}}{\sum_i{n_i}},
$$

em que \structure{$n_i$} é a frequência absoluta do valor \structure{$x_i$}.

## Média para dados em agrupamento simples {.allowframebreaks}

- Nota-se que, no caso de haver um agrupamento de dados, cada valor de \structure{$x$} deve ser multiplicado pelo \structure{número de vezes em que ele ocorre}, para depois se obter a soma.
- Podemos utilizar uma calculadora, fórmulas de planilhas eletrônicas, ou ainda funções de um _software_ estatístico para nos auxiliar neste procedimento.

\framebreak

- \structure{Exemplo (número de carburadores):} suponha que, em uma amostra de 32 diferentes modelos de automóveis, coletamos a informação com respeito ao número de carburadores e organizamos os dados em uma tabela de frequência.

```{r, echo=FALSE, message=FALSE, warning=FALSE, purl=FALSE}

library(knitr)

mtcars_pe <- mtcars[,-3]
freq_table_carb <- as.data.frame(table(mtcars_pe$carb))
freq_table_carb[,1] <- as.character(freq_table_carb[,1])
aux <- data.frame(Var1 = as.character("Total"), Freq = sum(freq_table_carb$Freq))
freq_table_carb <- rbind(freq_table_carb, aux)
names(freq_table_carb) <- c("Número de carburadores ($x_i$)", "Frequência ($n_i$)")

kable(freq_table_carb, align = c('l','c'))
```

\framebreak

- Multiplicando a primeira coluna (valores da variável \structure{$x$}) pela segunda coluna (frequências de \structure{$x$}) obtemos os elementos \structure{$n_ix_i$}.

```{r, echo=FALSE, message=FALSE, warning=FALSE, purl=FALSE}

freq_table_carb$"$n_ix_i$" <- c(as.numeric(freq_table_carb[-length(freq_table_carb[,1]),1]) * freq_table_carb[-length(freq_table_carb[,1]),2], sum(as.numeric(freq_table_carb[-length(freq_table_carb[,1]),1]) * freq_table_carb[-length(freq_table_carb[,1]),2]))

freq_table_carb %>%
  kable(align = c('l','c', 'c'),
        format.args = list(decimal.mark = ","))
```

\framebreak

- E assim temos que o número médio de carburadores neste grupo de automóveis estudado é

$$
\overline{x} = \frac{(7\times 1 + 10 \times 2 + \ldots + 8 \times 1)}{(7 + 10 + \ldots + 8)} = \frac{(7 + 20 + \ldots + 8)}{(7 + 10 + \ldots + 8)} = \frac{90}{32} = 2,8.
$$

- Note que o número de carburadores, em cada carro, é um valor inteiro, porém, a média não precisa ser necessariamente um número inteiro\footnote{Lembramos novamente aqui que a média é uma característica da distribuição (do grupo e não de um indivíduo/unidade).}.

## Média para dados em agrupamento simples {.allowframebreaks}

- Uma forma alternativa para calcular a média, no caso de agrupamentos simples, consiste em notar que $1/\sum_i{n_i}$ é uma constante, e portanto, podemos reescrever

$$
\overline{x} = \frac{1}{\sum_{i=1}{n_i}}\sum_{i=1}{n_ix_i}= \sum_{i=1}{x_i\frac{n_i}{\sum_{i=1}{n_i}}}.
$$

- Como $\sum_i{n_i} = n$\footnote{Salve o caso em temos dados ausentes. Neste caso $n$ é o número de elementos com dados observados.} o cálculo da média é expresso em função dos seus valores e suas frequências relativas ($f_i$)

$$
\overline{x} = \frac{1}{\sum_{i=1}{n_i}}\sum_{i=1}{n_ix_i}= \sum_{i=1}{x_i\frac{n_i}{\sum_{i=1}{n_i}}} = \sum_{i=1}{x_i\frac{n_i}{n}} = \sum_{i=1}{x_if_i}.
$$

## Média para dados em agrupamento simples {.allowframebreaks}


- Utilizando esta forma alternativa para o caso do exemplo dos carburadores, calculamos as frequências relativas, e em seguida multiplicamos as colunas \structure{$x_i$} e \structure{$f_i$}.
- A soma da coluna resultante é o valor da média do número de carburadores.

```{r, echo=FALSE, message=FALSE, warning=FALSE, purl=FALSE}

freq_table_carb[, 3] <- NULL

freq_table_carb$"$f_i$" <- freq_table_carb[,2] / sum(freq_table_carb[,2][-length(freq_table_carb[,2])])

freq_table_carb$"$f_ix_i$" <- c(as.numeric(freq_table_carb[-length(freq_table_carb[,1]),1]) * freq_table_carb[-length(freq_table_carb[,1]),3], sum(as.numeric(freq_table_carb[-length(freq_table_carb[,1]),1]) * freq_table_carb[-length(freq_table_carb[,1]),3]))

freq_table_carb %>%
  kable(align = c('l','c', 'c', 'c'), digits = c(0,0,2,2),
        format.args = list(decimal.mark = ","))
```

# Cálculo da média para dados em agrupamento por intervalo de classe

## Média para dados em agrupamento por intervalo de classe

- Quando os dados estão organizados em uma \structure{tabela com intervalos de classe}, é preciso haver um valor que represente cada intervalo.
- Este valor é o \structure{ponto médio} do intervalo de classe, denotado por \structure{$M$}\footnote{Lembre que já utilizamos o ponto médio (ou ponto central) do intervalo de classe na construção do {\bf polígono de frequências}.}.
- __Relembrando:__ o ponto médio é a média aritmética dos dois extremos de classe

$$
M = \frac{\mbox{limite inf. do int. de classe} + \mbox{limite sup. do int. de classe}}{2}.
$$

## Média para dados em agrupamento por intervalo de classe {.allowframebreaks}

- A média é calculada da mesma forma que no caso do agrupamento simples, substituindo \structure{$x_i$}
por \structure{$M_i$}:

$$
\overline{x} = \frac{\sum_i{n_iM_i}}{\sum_i{n_i}} = \sum_i{M_i\frac{n_i}{n}} = \sum_i{M_if_i},
$$

em que \structure{$M_i$}, \structure{$n_i$} e \structure{$f_i$} representam, respectivamente, o \structure{ponto médio}, a \structure{frequência absoluta} e a \structure{frequência relativa} da \structure{$i$}-ésima classe.

\framebreak

\structure{Exemplo (milhas por galão):} considere mais uma vez o exemplo do levantamento estatístico de 32 modelos de automóveis. Os dados referentes a variável _milhas por galão_, que é uma medida do desempenho do carro, foram organizados na tabela de frequências de intervalos de classe apresentada a seguir.

```{r, echo=FALSE, message=FALSE, warning=FALSE, purl=FALSE}

freq_table_carb <- as.data.frame(table(cut(x = mtcars$mpg,
                                           breaks = nclass.Sturges(mtcars$mpg),
                                           labels = c("10,4 $\\vdash$ 14,3",
                                                      "14,3 $\\vdash$ 18,2",
                                                      "18,2 $\\vdash$ 22,1",
                                                      "22,1 $\\vdash$ 26,1",
                                                      "26,1 $\\vdash$ 30,0",
                                                      "30,0 $\\vdash$ 33,9"),
                                           right = FALSE)))

freq_table_carb[,1] <- as.character(freq_table_carb[,1])

aux <- data.frame(Var1 = as.character("Total"), Freq = sum(freq_table_carb$Freq))

freq_table_carb <- rbind(freq_table_carb, aux)

names(freq_table_carb) <- c("Milhas por galão", "$n_i$")

freq_table_carb$"$f_i$" <- freq_table_carb$"$n_i$"/sum(freq_table_carb$"$n_i$"[-length(freq_table_carb[,2])])

freq_table_carb %>%
  kable(align = c('l', 'c', 'c'), digits = c(0, 0, 2),
        format.args = list(decimal.mark = ","))
```

\framebreak

- Para obter a média da distribuição da variável __milhas por galão__, calculamos os pontos médios (\structure{$M_i$}) e multiplicamos estes pelas suas respectivas frequências relativas (\structure{$f_i$}).
- Logo após, somamos esta coluna (\structure{$M_if_i$}).
    + O resultado é a média de milhas por galão neste conjunto de 32 automóveis.

```{r, echo=FALSE, message=FALSE, warning=FALSE, purl=FALSE}

freq_table_carb$"$M_i$" <- c(12.35, 16.25, 20.15, 24.1, 28.05, 31.95, NA)

freq_table_carb$"$M_if_i$" <- freq_table_carb$"$M_i$" * freq_table_carb$"$f_i$"
freq_table_carb$"$M_if_i$"[7] <- sum(freq_table_carb$"$M_if_i$"[-7])

freq_table_carb %>%
  kable(align = c('l', 'c', 'c', 'c', 'c'), digits = c(0, 0, 2, 2, 2),
        format.args = list(decimal.mark = ","))
```

\framebreak

\structure{Sua vez! (Teste de Desempenho Escolar):} calcule a média para os dados agrupados em intervalos de classe para o exemplo de desempenho escolar (TDE) referente a 27 alunos.

```{r, echo=FALSE, message=FALSE, warning=FALSE, purl=FALSE}

tde <- c(7, 18, 111, 25, 101, 85, 81, 75, 100, 95, 98, 108, 100, 94, 34, 99, 84, 90, 95, 102, 96, 105, 100, 107, 117, 96, 17)

tde.cat <- cut(x = tde,
               breaks = c(7, 29, 51, 73, 95, 117),
               labels = c("7 $\\vdash$ 29", "29 $\\vdash$ 51",
                          "51 $\\vdash$ 73", "73 $\\vdash$ 95",
                          "95 $\\vdash$ 117"),
               include.lowest = F, right = FALSE)

tde.tab <- as.data.frame(na.omit(summarytools::freq(tde.cat)))["Freq"]
tde.tab <- data.frame("tde"= row.names(tde.tab), "freq" = tde.tab$Freq)

knitr::kable(tde.tab, col.names = c("Classe TDE", "Frequência ($n_i$)"))

```

## Para casa

1. Resolver os exercícios 1 a 3 do Capítulo 8.5 do livro __Fundamentos de Estatística__\footnote{Vieira, S. {\bf Fundamentos de Estatística}, Atlas, 2019, p. 135-136.} (disponível no Sabi+).
2. Para o seu levantamento estatístico, calcule médias, modas e medianas, de acordo com a classificação das variáveis. Compartilhe no Fórum Geral do Moodle.

## Próxima aula 

- Mediana e moda.
- Médias ponderada, geométrica e harmônica.
- Complementa`R`.

## Por hoje é só!

\begin{center}
{\bf Bons estudos!}
\end{center}

```{r echo=FALSE, fig.align='center', message=FALSE, warning=FALSE, out.width='50%', out.height='50%', paged.print=FALSE, purl=FALSE}

knitr::include_graphics(here::here('images', 'Statistically-Insignificant-barras05.jpg'))

```

